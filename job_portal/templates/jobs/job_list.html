{% extends "base.html" %} {% block content %}
<h2 class="mb-4">Available Jobs</h2>

{% if user.role == "recruiter" %}
<a href="{% url 'create_job' %}" class="btn btn-primary mb-3"> Post Job </a>
{% endif %}

<div class="mb-3">
    <a href="{% url 'job_list' %}"
       class="btn btn-outline-primary btn-sm ">
       All Jobs
    </a>

    <a href="?type=fulltime"
       class="btn btn-outline-success btn-sm">
       Full Time
    </a>

    <a href="?type=micro"
       class="btn btn-outline-warning btn-sm">
       Local / Micro
    </a>
</div>

<div class="row">
  {% for job in jobs %}
  <div class="col-md-6 mb-4">
  <div class="job-card p-4">

    <div class="d-flex justify-content-between align-items-start">

      <div>
        <h5 class="fw-bold mb-1">
          <a href="{% url 'job_detail' job.id %}" class="job-title">
            {{ job.title }}
          </a>
        </h5>

        <p class="text-muted mb-1">
          {{ job.company }} â€¢ {{ job.location }}
        </p>
      </div>

      <div class="text-end">

        {% if job.job_type == "micro" %}
          <span class="badge bg-warning text-dark">
            Micro
          </span>
        {% endif %}

        {% if job.id in applied_jobs %}
          <span class="badge bg-success">
            Applied
          </span>
        {% endif %}

      </div>

    </div>

    <p class="mt-3 text-muted">
      {{ job.description|truncatewords:20 }}
    </p>

    <div class="d-flex justify-content-between align-items-center mt-3">

      <small class="text-muted">
        {{ job.created_at|timesince }} ago
      </small>

      {% if job.application_deadline %}
        <small class="text-danger">
          Deadline: {{ job.application_deadline }}
        </small>
      {% endif %}

    </div>

  </div>
</div>
  {% empty %}
  <p>No jobs available.</p>
  {% endfor %}
</div>

{% endblock %}
